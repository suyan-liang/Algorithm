# 前缀和与差分

[好文](https://blog.csdn.net/K_R_forever/article/details/81775899?utm_medium=distribute.pc_relevant_t0.none-task-blog-BlogCommendFromMachineLearnPai2-1.channel_param&depth_1-utm_source=distribute.pc_relevant_t0.none-task-blog-BlogCommendFromMachineLearnPai2-1.channel_param)



#### 一维前缀和

```cpp
#include<cstdio>
#include<iostream>
#include<algorithm>
using namespace std;
int a[N],sum[N],n;

int main(){
	cin>>n;
	//a是数字数组
	for(int i=1;i<=n;i+) {
		cin>>a[i];
	}
    //sum代表前缀和
	for(int i=1;i<=n;i++){
		sum[i]=sum[i-1]+a[i];
	}
	cin>>q;
    //求[l,r]的前缀和
	for(int i=1;i<=q;i++){
		int l,r;
		cout<<sum[r]-sum[l-1];//注意这个l-1
	} 
	return 0;
}

```

#### 二维前缀和

##### 1.预处理前缀和

```cpp
//此处是将原数组和前缀和数组放到一起了
for(int i=1;i<=n;i++){
	for(int j=1;j<=m;j++)
	a[i][j]+=a[i][j-1]+a[i-1][j]-a[i-1][j-1];
} 
```

##### 2.求部分前缀和

具体的边界和细节要自己随便找一个例子试一下即可

```cpp
int x1,y1,x2,y2;
cin>>x1>>y1>>x2>>y2;
int ans=a[x2][y2]-a[x1-1][y2]-a[x2][y1-1]+a[x1-1][y1-1];
cout<<ans<<endl;
```



#### 差分

`B[i]=A[i]-A[i-1](2=<i<=n)`

差分就是将数列中的每一项分别与前一项数做差，例如：

一个序列1 2 5 4 7 3，差分后得到1 1 3 -1 3 -4 -3

这里注意得到的差分序列第一个数和原来的第一个数一样（相当于第一个数减0）

差分序列最后比原序列多一个数（相当于0减最后一个数）



##### 性质：

1、***差分序列求前缀和可得原序列***

2、***将原序列区间[L,R]中的元素全部+1，可以转化操作为差分序列L处+1，R+1处-1***

3、按照性质2得到，每次修改原序列一个区间+1，那么每次差分序列修改处增加的和减少的相同

4、差分要从后往前求





***当对区间做了某种修改，直接修改该差分序列，最后求差分序列的前缀和即可得到原答案。***



### 例题

[二维前缀和](https://www.acwing.com/activity/content/code/content/20543/)